---
"title": "Capital Persistence War Experimental Design"
"summary": "This article details the experimental design for the Capital Persistence War. The core concept involves using a benchmark account as a reference, while the betting account employs an Anti-Martingale strategy to dynamically adjust position sizes. Key elements include: time tick t representing discrete market moments; the benchmark account trades with a fixed position, providing a cumulative profit and loss curve; the betting account calculates the input cash flow C(t) and benchmark stop-loss amount StopLoss(t) based on benchmark performance, constructs the risk control line RiskLine(t) and venture capital VC(t), and determines position size via the formula Position(t) = floor(VC(t) / StopLoss(t)); it defines the handling logic for take-profit and stop-loss events, as well as conditions for pausing trading during observation periods. The overall aim is to maximize the utilization efficiency of venture capital, achieving aggressive yet controlled betting."
"tags":
  - "Capital Persistence War"
  - "Experimental Design"
  - "Anti-Martingale"
  - "Capital Management"
  - "Risk Control"
  - "Position Sizing"
  - "Benchmark Account"
  - "Betting Account"
"date": "2026-02-02"
---

# Capital Persistence War Experimental Design

2026-02-02

Revisiting the underlying concepts of the experimental design, as the details of the AI-generated code still require refinement.

## Time Tick t

Time tick t is discrete, representing each moment in the market. It can be minutes, hours, days, etc. Typically, it refers to each candlestick bar. Many time series will be discussed next, all with t as their independent variable.

## Benchmark Account

The benchmark account is an account that does not use any capital management strategy. It always trades with an initial position size of 1 unit. The performance of the benchmark account guides the capital management of the betting account.

- **Cumulative Profit and Loss of the Benchmark Account**, BasePnL(t), a time series with an initial value of 0. It always trades with an initial position size of 1 unit. This yields the cumulative profit and loss curve.

## Betting Account

The betting account uses an Anti-Martingale capital management strategy, dynamically adjusting position sizes based on the performance of the benchmark account.

Important Parameter:
- **Target Take-Profit Amount** M_T, determined by the betting strategy parameters.

Objects of Study:
- **Unrealized Profit and Loss** UnrealizedPnL(t), a time series representing the current unrealized profit and loss of the benchmark account's position. Initial value is 0.
- **Realized Profit and Loss** RealizedPnL(t), a time series representing the realized profit and loss of the benchmark account. Initial value is 0.
- **Cumulative Profit and Loss** PnL(t), a time series representing the system's generated profit and loss. It always equals PnL(t) = UnrealizedPnL(t) + RealizedPnL(t). This PnL is the net value curve. It can be linearly scaled to any initial capital size. The performance of the betting model can be observed through PnL(t).

### Risk Control

#### Determining Input Cash Flow

**Input Cash Flow** C(t), a time series representing the rate of input cash flow (note: not the total amount).

Derived from the historical performance of the benchmark account and dynamically updated.

The recommended calculation method is: calculate the maximum (loss / time duration) from each trade in the benchmark account and use that value as C(t).

#### Constructing the Hard Risk Control Line

**Risk Control Line** RiskLine, initial value is 0.

Naturally iterates as RiskLine(t+1) = RiskLine(t) - C(t). Upon taking profit, RiskLine is reset to 0.

The risk control line moves downward over time. At any moment, it is guaranteed that UnrealizedPnL(t) >= RiskLine(t).

**Venture Capital (VC)**

Always equals VC(t) = UnrealizedPnL(t) - RiskLine(t), representing the capital currently available for betting, the capital bearing the full risk of loss. Venture capital is always non-negative.

### Determining Position Size

In principle, under the risk control conditions, bet as aggressively as possible to maximize the utilization efficiency of venture capital. Any action that wastes venture capital is meaningless. Each position size is determined with the resolve to lose the entire VC(t) in case of maximum loss, not wasting any portion of the venture capital.

**Benchmark Stop-Loss Amount**, StopLoss(t)

Represents the maximum floating loss amount set per unit of position, i.e., the stop-loss amount during the holding period. If this stop-loss line is touched during the holding period, it triggers an intraday exit. The benchmark stop-loss amount is derived from the historical performance of the benchmark account and is dynamically updated.

The recommended calculation method is: calculate the maximum intraday floating loss from each trade in the benchmark account and use that value as StopLoss(t). Note: calculate the intraday floating loss, not the final profit/loss. For long positions, use the lowest price; for short positions, use the highest price.

**Position Size**, a non-negative integer representing the multiple of the betting account's position relative to the benchmark account's position.

```pseudocode
if StopLoss(t) > 0 then
    Position(t) = max(1, floor(VC(t) / StopLoss(t)))
else
    Position(t) = 0
end if
```

Note: If StopLoss(t) = 0.01 and VC(t) = 1, this means we would open a position 100 times the size of the benchmark position. This appears to be a very aggressive position. For example, the minimum trading amount for a BTC contract is 0.0001 BTC, so a 100x position would only be a 0.01 BTC position, which doesn't seem alarming. However, it remains to be observed whether this multiple is too large to be practically achievable.

### Observation Period

When C(t) is 0 or StopLoss(t) is 0, it indicates an observation period. No trading occurs; only C(t) and StopLoss(t) are updated. Position(t) remains 0.

### Take-Profit Event

When UnrealizedPnL(t) >= M_T, a take-profit event is triggered, and take-profit processing occurs. Since take-profit is triggered intraday, UnrealizedPnL(t) can only reach M_T, not exceed it. When checking for take-profit events, use the highest floating profit during the holding period: for long positions, use the highest price; for short positions, use the lowest price.

Record the take-profit event, reset RiskLine(t) = UnrealizedPnL(t) = 0, making VC(t) = 0.

```pseudocode
RealizedPnL(t) += M_T
UnrealizedPnL(t) = 0
RiskLine(t) = 0
```

The already observed information C(t) and StopLoss(t) remain unchanged.

### Stop-Loss Event

When the maximum floating loss during the holding period >= StopLoss(t), a stop-loss event is triggered, and stop-loss processing occurs.

Record the stop-loss event. UnrealizedPnL(t) can only draw down to RiskLine(t) at most, i.e., VC(t) = 0.

For the benchmark account, the already observed information C(t) and StopLoss(t) remain unchanged.
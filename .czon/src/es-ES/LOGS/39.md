---
"title": "Diseño Experimental de la Guerra de Desgaste del Capital"
"summary": "Este artículo detalla el diseño experimental de la Guerra de Desgaste del Capital. El núcleo consiste en utilizar una cuenta de referencia como benchmark, mientras que la cuenta de apuestas emplea una estrategia Anti-Martingale para ajustar dinámicamente el tamaño de la posición. Los contenidos clave incluyen: la escala de tiempo t como momentos discretos del mercado; la cuenta de referencia que opera con un tamaño de posición fijo, proporcionando una curva de ganancias y pérdidas acumuladas; la cuenta de apuestas que calcula el flujo de caja de entrada C(t) y la pérdida máxima de referencia StopLoss(t) basándose en el rendimiento de la referencia, construyendo la línea de control de riesgo RiskLine(t) y el capital de riesgo VC(t), determinando el tamaño de la posición mediante la fórmula Position(t) = floor(VC(t) / StopLoss(t)); se define la lógica de manejo para eventos de toma de ganancias y de stop-loss, así como las condiciones para pausar operaciones durante períodos de observación. El objetivo general es maximizar la eficiencia en el uso del capital de riesgo, logrando apuestas agresivas pero controladas."
"tags":
  - "Guerra de Desgaste del Capital"
  - "Diseño Experimental"
  - "Anti-Martingale"
  - "Gestión de Capital"
  - "Control de Riesgo"
  - "Cálculo de Posición"
  - "Cuenta de Referencia"
  - "Cuenta de Apuestas"
"date": "2026-02-02"
---

# Diseño Experimental de la Guerra de Desgaste del Capital

2026-02-02

Revisemos los conceptos subyacentes del diseño experimental, ya que los detalles del código escrito por la IA aún necesitan perfeccionarse.

## Escala de Tiempo t

La escala de tiempo t es discreta y representa cada momento del mercado. Puede ser minuto, hora, día, etc. Normalmente se refiere a cada vela (K-line). A continuación, se discutirán muchas series temporales cuyas variables independientes son t.

## Cuenta de Referencia

La cuenta de referencia es una cuenta que no utiliza ninguna estrategia de gestión de capital. Siempre opera con un tamaño de posición inicial de 1 unidad. El rendimiento de la cuenta de referencia se utiliza para guiar la gestión de capital de la cuenta de apuestas.

- **Ganancias y Pérdidas Acumuladas de la Referencia** BasePnL(t), serie temporal, valor inicial 0. Siempre opera con un tamaño de posición inicial de 1 unidad. De esto se obtiene la curva de ganancias y pérdidas acumuladas.

## Cuenta de Apuestas

La cuenta de apuestas utiliza una estrategia de gestión de capital Anti-Martingale, ajustando dinámicamente el tamaño de la posición en función del rendimiento de la cuenta de referencia.

Parámetros importantes:

- **Monto Objetivo de Toma de Ganancias** M_T, determinado por los parámetros de la estrategia de apuestas.

Objetos de estudio:

- **Ganancias/Pérdidas No Realizadas** UnrealizedPnL(t), serie temporal, representa las ganancias/pérdidas no realizadas de la posición actual en la cuenta de referencia. Valor inicial 0.

- **Ganancias/Pérdidas Realizadas** RealizedPnL(t), serie temporal, representa las ganancias/pérdidas ya realizadas por la cuenta de referencia. Valor inicial 0.

- **Ganancias/Pérdidas Acumuladas** PnL(t), serie temporal, representa las ganancias y pérdidas generadas por el sistema. Siempre es igual a PnL(t) = UnrealizedPnL(t) + RealizedPnL(t). Este PnL es la curva de valor neto (net equity). Se puede escalar linealmente a cualquier tamaño de capital inicial. El rendimiento del modelo de apuestas se puede observar a través de PnL(t).

### Control de Riesgo

#### Determinar el Flujo de Caja de Entrada

**Flujo de Caja de Entrada** C(t), serie temporal, representa la velocidad del flujo de caja de entrada (nota: no el volumen total).

Se deriva del rendimiento histórico de la cuenta de referencia y se actualiza dinámicamente.

El método de cálculo recomendado es: calcular, para cada operación de la cuenta de referencia, la mayor **pérdida / duración temporal** y usar ese valor como C(t).

#### Construir la Línea de Control de Riesgo Estricta

**Línea de Control de Riesgo** RiskLine, valor inicial 0.

Naturalmente, itera según RiskLine(t+1) = RiskLine(t) - C(t). Al tomar ganancias, RiskLine se restablece a 0.

La línea de control de riesgo se desplaza hacia abajo a medida que pasa el tiempo. En cualquier momento, se garantiza que UnrealizedPnL(t) >= RiskLine(t).

**Capital de Riesgo** (Venture Capital, VC)

Siempre es igual a VC(t) = UnrealizedPnL(t) - RiskLine(t), representando el capital disponible actualmente para apostar, el capital que asume el riesgo de pérdida total. El capital de riesgo siempre es no negativo.

### Determinar el Tamaño de la Posición

En principio, bajo las condiciones de control de riesgo, se apuesta de la manera más agresiva posible para maximizar la eficiencia en el uso del capital de riesgo. Cualquier acción que desperdicie capital de riesgo carece de sentido. Cada tamaño de posición se determina con la determinación de que la máxima pérdida posible agote completamente el VC(t), sin desperdiciar ni una unidad del capital de riesgo.

**Pérdida Máxima de Referencia**, StopLoss(t)

Representa la máxima pérdida flotante establecida por unidad de posición actual, es decir, el nivel de stop-loss durante la tenencia de la posición. Si se toca esta línea durante la tenencia, resultará en una salida intradía. La pérdida máxima de referencia se deriva del rendimiento histórico de la cuenta de referencia y se actualiza dinámicamente.

El método de cálculo recomendado es: calcular, para cada operación de la cuenta de referencia, la mayor pérdida flotante intradía y usar ese valor como StopLoss(t). Nota: se debe calcular la pérdida flotante intradía, no la ganancia/pérdida final. Para posiciones largas se usa el precio más bajo, para posiciones cortas se usa el precio más alto.

**Tamaño de la Posición**, es un entero no negativo que representa el múltiplo de la posición de la cuenta de apuestas en relación con la posición de la cuenta de referencia.

```pseudocode
if StopLoss(t) > 0 then
    Position(t) = max(1, floor(VC(t) / StopLoss(t)))
else
    Position(t) = 0
end if
```

Nota: si StopLoss(t) = 0.01 y VC(t) = 1, esto significa que abriríamos una posición 100 veces mayor que la posición de referencia. Esto parece un tamaño de posición muy agresivo. Por ejemplo, el monto mínimo de operación para contratos de BTC es 0.0001 BTC, entonces una posición 100 veces mayor sería solo una posición de 0.01 BTC, lo cual no parece tan alarmante. Sin embargo, aún es necesario observar si este múltiplo podría ser demasiado grande, haciendo que sea imposible de implementar en la operativa real.

### Período de Observación

Cuando C(t) es 0 o StopLoss(t) es 0, indica un período de observación. No se realizan operaciones, solo se actualizan C(t) y StopLoss(t). Position(t) siempre es 0.

### Evento de Toma de Ganancias

Cuando UnrealizedPnL(t) >= M_T, se activa un evento de toma de ganancias y se procede a tomar ganancias. Dado que la toma de ganancias se activa intradía, UnrealizedPnL(t) solo puede alcanzar M_T, no superarlo. Al verificar el evento de toma de ganancias, se debe utilizar la máxima ganancia flotante de la posición, calculando con el precio más alto para posiciones largas y el precio más bajo para posiciones cortas.

Registrar el evento de toma de ganancias, restablecer RiskLine(t) = UnrealizedPnL(t) = 0, haciendo que VC(t) = 0.

```pseudocode
RealizedPnL(t) += M_T
UnrealizedPnL(t) = 0
RiskLine(t) = 0
```

La información ya observada, C(t) y StopLoss(t), permanece sin cambios.

### Evento de Stop-Loss

Cuando la máxima pérdida flotante durante la tenencia de la posición >= StopLoss(t), se activa un evento de stop-loss y se procede a aplicar el stop-loss.

Registrar el evento de stop-loss. UnrealizedPnL(t) solo puede retroceder hasta RiskLine(t) como máximo, es decir, VC(t) = 0.

Para la cuenta de referencia, la información ya observada, C(t) y StopLoss(t), permanece sin cambios.
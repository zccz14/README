---
"title": "Diseño Experimental de la Guerra de Capitales de Larga Duración"
"summary": "Este artículo detalla el diseño experimental de la Guerra de Capitales de Larga Duración. El núcleo consiste en utilizar una cuenta de referencia como benchmark, mientras que la cuenta de apuestas emplea la estrategia Anti-Martingale para ajustar dinámicamente el tamaño de la posición. Los contenidos clave incluyen: la escala de tiempo t como momento de mercado discreto; la cuenta de referencia que opera con un tamaño de posición fijo, proporcionando una curva de ganancias y pérdidas acumuladas; la cuenta de apuestas que calcula el flujo de caja de entrada C(t) y el stop loss de referencia StopLoss(t) basándose en el rendimiento de la referencia, construyendo la línea de control de riesgo RiskLine(t) y el capital de riesgo VC(t), determinando el tamaño de la posición mediante la fórmula Position(t) = floor(VC(t) / StopLoss(t)); define la lógica de manejo para eventos de toma de ganancias y stop loss, así como las condiciones de pausa de operaciones durante el período de observación. El objetivo general es maximizar la eficiencia en el uso del capital de riesgo, logrando apuestas agresivas pero controladas."
"tags":
  - "Guerra de Capitales de Larga Duración"
  - "Diseño Experimental"
  - "Anti-Martingale"
  - "Gestión de Capital"
  - "Control de Riesgo"
  - "Cálculo de Posición"
  - "Cuenta de Referencia"
  - "Cuenta de Apuestas"
"date": "2026-02-02"
---

# Diseño Experimental de la Guerra de Capitales de Larga Duración

2026-02-02

Revisemos los conceptos subyacentes del diseño experimental, ya que los detalles del código escrito por la IA aún necesitan ser perfeccionados.

## Escala de Tiempo t

La escala de tiempo t es discreta y representa cada momento del mercado. Puede ser minuto, hora, día, etc. Normalmente se refiere a cada vela (K-line). A continuación, se discutirán muchas series temporales cuyas variables independientes son t.

## Cuenta de Referencia

La cuenta de referencia es una cuenta que no utiliza ninguna estrategia de gestión de capital. Siempre opera con un tamaño de posición inicial de 1 unidad. El rendimiento de la cuenta de referencia se utiliza para guiar la gestión de capital de la cuenta de apuestas.

- **Ganancias y Pérdidas Acumuladas de la Referencia, BasePnL(t)**: Serie temporal, valor inicial 0. Siempre opera con un tamaño de posición inicial de 1 unidad. De esto se obtiene la curva de ganancias y pérdidas acumuladas.

## Cuenta de Apuestas

La cuenta de apuestas utiliza la estrategia de gestión de capital Anti-Martingale, ajustando dinámicamente el tamaño de la posición según el rendimiento de la cuenta de referencia.

Parámetros importantes:

- **Monto Objetivo de Toma de Ganancias, M_T**: Determinado por los parámetros de la estrategia de apuestas.

Objetos de estudio:

- **Ganancias/Pérdidas No Realizadas, UnrealizedPnL(t)**: Serie temporal, representa las ganancias/pérdidas no realizadas de la posición actual en la cuenta de referencia. Valor inicial 0.

- **Ganancias/Pérdidas Realizadas, RealizedPnL(t)**: Serie temporal, representa las ganancias/pérdidas ya realizadas por la cuenta de referencia. Valor inicial 0.

- **Ganancias y Pérdidas Acumuladas, PnL(t)**: Serie temporal, representa las ganancias y pérdidas generadas por el sistema. Siempre es igual a PnL(t) = UnrealizedPnL(t) + RealizedPnL(t). Este PnL es la curva de valor neto (Net Asset Value). Se puede escalar linealmente a cualquier tamaño de capital inicial. El rendimiento del modelo de apuestas se puede observar a través de PnL(t).

### Control de Riesgo

#### Determinar el Flujo de Caja de Entrada

**Flujo de Caja de Entrada, C(t)**: Serie temporal, representa la velocidad del flujo de caja de entrada (nota: no el volumen total).

Se deriva y actualiza dinámicamente según el rendimiento histórico de la cuenta de referencia.

El método de cálculo recomendado es: calcular, para cada operación de la cuenta de referencia, la mayor **pérdida / duración** como valor de C(t).

#### Construir la Línea de Control de Riesgo Estricta

**Línea de Control de Riesgo, RiskLine**: Valor inicial 0.

Naturalmente, itera según RiskLine(t+1) = RiskLine(t) - C(t). Al tomar ganancias, RiskLine se restablece a 0.

La línea de control de riesgo se mueve hacia abajo a medida que pasa el tiempo. En cualquier momento, se garantiza que UnrealizedPnL(t) >= RiskLine(t).

**Capital de Riesgo (Venture Capital, VC)**

Siempre igual a VC(t) = UnrealizedPnL(t) - RiskLine(t), representa el capital actualmente disponible para apostar, el capital que asume el riesgo de pérdida total. El capital de riesgo siempre es no negativo.

### Determinar el Tamaño de la Posición

En principio, bajo las condiciones de control de riesgo, se apuesta de la manera más agresiva posible para maximizar la eficiencia en el uso del capital de riesgo. Cualquier acción que desperdicie capital de riesgo carece de sentido. Cada tamaño de posición se determina con la determinación de que la máxima pérdida agote completamente el VC(t), sin desperdiciar ni una unidad de capital de riesgo.

**Stop Loss de Referencia, StopLoss(t)**

Representa el monto máximo de pérdida flotante establecido por unidad de posición actual, es decir, el nivel de stop loss durante la tenencia de la posición. Si se toca esta línea durante la tenencia, provocará una salida intradía. El stop loss de referencia se deriva y actualiza dinámicamente según el rendimiento histórico de la cuenta de referencia.

El método de cálculo recomendado es: calcular, para cada operación de la cuenta de referencia, la mayor pérdida flotante intradía como valor de StopLoss(t). Nota: se debe calcular la pérdida flotante intradía, no el resultado final de ganancias/pérdidas. Para posiciones largas se usa el precio más bajo, para posiciones cortas se usa el precio más alto.

**Tamaño de la Posición**: Es un entero no negativo que representa el múltiplo de la posición de la cuenta de apuestas en relación con la posición de la cuenta de referencia.

```pseudocode
if StopLoss(t) > 0 then
    Position(t) = max(1, floor(VC(t) / StopLoss(t)))
else
    Position(t) = 0
end if
```

Nota: Si StopLoss(t) = 0.01 y VC(t) = 1, esto significa que abriríamos una posición 100 veces mayor que la posición de referencia. Esto parece un tamaño de posición muy agresivo. Por ejemplo, el monto mínimo de operación para contratos de BTC es 0.0001 BTC, entonces una posición 100 veces mayor sería solo una posición de 0.01 BTC, lo cual no parece tan alarmante. Sin embargo, aún es necesario observar si este múltiplo podría ser demasiado grande, haciendo que sea imposible de implementar en la operativa real.

### Período de Observación

Cuando C(t) es 0 o StopLoss(t) es 0, indica un período de observación. No se realizan operaciones, solo se actualizan C(t) y StopLoss(t). Position(t) siempre es 0.

### Evento de Toma de Ganancias

Cuando UnrealizedPnL(t) >= M_T, se activa el evento de toma de ganancias y se procede a tomar ganancias. Dado que la toma de ganancias se activa intradía, UnrealizedPnL(t) solo puede alcanzar M_T, no superarlo. Al verificar el evento de toma de ganancias, se debe utilizar la máxima ganancia flotante de la posición, calculando con el precio más alto para posiciones largas y el precio más bajo para posiciones cortas.

Registrar el evento de toma de ganancias, restablecer RiskLine(t) = UnrealizedPnL(t) = 0, haciendo que VC(t) = 0.

```pseudocode
RealizedPnL(t) += M_T
UnrealizedPnL(t) = 0
RiskLine(t) = 0
```

La información ya observada, C(t) y StopLoss(t), permanece sin cambios.

### Evento de Stop Loss

Cuando la máxima pérdida flotante durante la tenencia de la posición >= StopLoss(t), se activa el evento de stop loss y se procede a aplicar el stop loss.

Registrar el evento de stop loss. UnrealizedPnL(t) solo puede retroceder hasta RiskLine(t) como máximo, es decir, VC(t) = 0.

El stop loss también ocurre intradía. Una vez que ocurre el stop loss, la operación actual se detiene; incluso si el precio rebota posteriormente, la pérdida ya está bloqueada. El capital de control de riesgo se reducirá a cero, pero en realidad no es necesario restablecer ningún estado; se aplica el stop loss y se continúa operando.

Para la cuenta de referencia, la información ya observada, C(t) y StopLoss(t), permanece sin cambios.
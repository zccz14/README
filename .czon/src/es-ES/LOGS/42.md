---
"title": "Reflexiones sobre Permisos del Sistema y Capitalización de la IA"
"summary": "Este artículo aborda cuatro temas centrales: primero, discute la necesidad de un diseño asimétrico de permisos en el sistema Yuan, enfatizando la necesidad de establecer mecanismos de control de permisos sólidos antes de abrir los datos, para permitir el acceso a datos e interfaces de pedidos desde diferentes plataformas de estrategias. En segundo lugar, analiza la forma inicial y las tendencias futuras de la capitalización de la IA, señalando las oportunidades para intermediarios en la gestión de APIs y el potencial a largo plazo de BYOK. En tercer lugar, propone un esquema para mejorar el sistema de usuarios basado en Supabase, implementando inicio de sesión sin contraseña con PassKey a través de Edge Functions. Finalmente, menciona brevemente los requisitos de cumplimiento para la integración de sistemas de pago. El artículo tiene como objetivo proporcionar ideas prácticas para equipos técnicos en el diseño de sistemas, desarrollo de negocios de IA y optimización de la experiencia del usuario."
"tags":
  - "Diseño de Permisos"
  - "Capitalización de la IA"
  - "Sistema de Usuarios"
  - "Supabase"
  - "PassKey"
  - "Sistema de Pagos"
  - "Sistema Yuan"
  - "Gestión de API"
"date": "2026-02-04"
---

# Algunas Tareas Pendientes

Ahora son las 0:00 del 4 de febrero de 2026.

He trabajado todo el día, en general ha sido un proceso de dejar que la IA trabaje mientras pienso. Estoy un poco cansado, lo retomaré mañana.

Hay algunas cosas que vale la pena hacer, las anoto.

## 1. Abrir Nuestro Sistema

¿Se puede diseñar de forma asimétrica los permisos dentro del host de Yuan, y los permisos para conectarse al host? Es decir, que no todos los terminales que se conecten al host obtengan los mismos permisos. Esto nos ayudaría a controlar mejor los permisos y, por lo tanto, a abrir mejor nuestros datos. Actualmente, debido a la falta de mecanismos de permisos dentro del host, nos vemos obligados a cerrar temporalmente algunas fuentes de datos y no nos atrevemos a hacerlas públicas fácilmente para la IA. En última instancia, esto afecta el progreso de los experimentos.

En concreto, ¿se pueden otorgar permisos para leer SQL? ¿Y para escribir SQL? A nivel de Método, ¿el acceso debe ser permitido por defecto o denegado por defecto? ¿Y cómo se debe realizar la autorización? Todas estas preguntas requieren un buen diseño.

La ventaja es que podemos otorgar permisos más altos a Yuan CLI, permitiendo que la IA trabaje mejor.

En el futuro, Yuan podría convertirse en una fuente de datos y una plataforma de pedidos. Y las estrategias intermedias probablemente serán muy diversas. Por ahora, además de la plataforma de estrategias del sistema Kernel+Agent integrado en Yuan, está la plataforma de estrategias TimeLab hecha por Jige, y el repositorio de experimentos de "guerra prolongada" en el que he estado trabajando recientemente. Se basan en diferentes filosofías de diseño y pilas tecnológicas, y es probable que coexistan en el futuro. Sin embargo, todas estas plataformas de estrategias necesitan acceder a los datos de Yuan y a la interfaz de pedidos.

Por lo tanto, cómo diseñar bien el sistema de permisos es un problema importante. **Para abrir, primero hay que protegerse** (tono de Fenghua).

## 2. Capacidades de Capitalización de la IA

Recientemente, al usar algunas APIs intermediarias, noté que están utilizando el proyecto New API para la gestión de usuarios y la facturación. Esencialmente, están capitalizando su grupo de suscripciones, vendiéndolas al por mayor y al por menor a los usuarios. Pero esta forma de venta, al no estar vinculada a un negocio específico, no permite vender a un precio alto. Aquí, el poder de negociación se cede al lado del negocio ascendente.

En cierto sentido, esto es una capitalización de APIs de IA, una forma inicial de capitalización de la IA. Construir productos de IA ascendentes puede aprovechar los activos de API subyacentes, lubricando el negocio ascendente, permitiendo a los usuarios no enfrentar directamente la complejidad de la configuración de APIs, mejorando así la experiencia del usuario. ¡Suscripción directa al producto o pago por uso! Los usuarios solo se preocuparán por el producto combinado, no por cómo se configuran las APIs subyacentes. Aquí hay otra capa de margen de beneficio.

Actualmente, la gestión de API KEY sigue siendo una barrera para el usuario promedio. Muchos usuarios no entienden el concepto de API KEY, ni siquiera saben cómo solicitarla o gestionarla. Por lo tanto, los intermediarios en el negocio de la IA aún tienen una gran oportunidad. En realidad, es un problema de diferencia de conocimiento. Este tipo de beneficio es extremadamente escalable.

Por supuesto, creo que en el futuro, BYOK será definitivamente una tendencia. Los usuarios querrán usar sus propias API Keys para evitar problemas de fuga de datos. Por otro lado, los usuarios también querrán comprar servicios de IA al precio de costo de la API, en lugar de que un intermediario se lleve la diferencia. En realidad, los intermediarios también realizan mucho ensamblaje de negocio, lo cual tiene valor. En el lado del negocio, BYOK puede ser una opción, pero en los próximos años, antes de que el concepto de API KEY esté completamente difundido, BYOK no se convertirá en la corriente principal.

## 3. Mejora del Sistema de Usuarios

Supabase sigue siendo una buena opción, pero su sistema de usuarios aún tiene algunas deficiencias. Por ejemplo, no admite PassKey, un método de inicio de sesión sin contraseña. Se me ocurrió un esquema para hacer que Supabase admita PassKey, que proviene de:

**Usar la identidad de administrador (service_role) en una Edge Function para crear una sesión de Supabase para un usuario específico, y obtener el access_token / refresh_token, devolviéndolo al frontend.**

- Supabase no tiene una API oficial para que un "administrador genere directamente una sesión para cualquier usuario".
- La práctica recomendada oficial: usar la combinación `auth.admin.generateLink` + `auth.verifyOtp` en el backend (Edge Function), simulando un flujo de inicio de sesión con magic link, para así obtener el objeto de sesión de ese usuario (que contiene access_token / refresh_token, etc.).
- Este flujo se puede completar completamente dentro de la Edge Function, sin necesidad de enviar realmente un correo al usuario, ni de que el usuario haga clic en un enlace.

Por lo tanto, podemos implementar completamente la funcionalidad de inicio de sesión con PassKey a través de Edge Functions. A partir de ahora, el sistema de usuarios basado en Supabase permitirá registrarse con correo electrónico, iniciar sesión con correo electrónico y luego también iniciar sesión con PassKey. Todo el proceso es sin contraseña, lo que mejorará la experiencia del usuario. Sin embargo, PassKey es un método de interacción pesado, no es adecuado para usarlo en cada operación, solo es adecuado para vincularlo al inicio de sesión inicial y a algunas operaciones importantes (como cambiar la contraseña, modificar el método de pago, etc.). Para mantener la sesión normalmente, se puede seguir reutilizando el mecanismo de access_token / refresh_token de Supabase, el mecanismo JWT es muy útil.

## 4. Sistema de Pagos

Un problema muy antiguo y real, ¿cómo hacer que los usuarios paguen? ¿Cómo transferir el dinero de manera conforme a la cuenta de cobro de la empresa? ¿Cómo vincular un código QR para que el usuario escanee y pague, y el dinero llegue a la cuenta de la empresa? Todos estos problemas necesitan solución.

Tendremos varios esquemas, integrarnos con una plataforma de pagos podría ser una buena opción. Hay que seguir el proceso, luego compartiré la experiencia.
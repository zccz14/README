Ahora es el 9 de febrero de 2026, por la tarde.

Como mencioné [anteriormente](./56.md), CZON implementó la función de verificación de enlaces, pero hubo algunos incidentes menores en el proceso.
Al principio, solo implementé la verificación de enlaces rotos y la verificación que prohíbe enlaces fuera del alcance del proyecto. Se detectaron con éxito algunos enlaces rotos, y luego pasé estos mensajes de error a OpenCode + MiniMax M2.1 para que los corrigiera.

Un caso típico fue: en `.czon/AIGC/SUMMARY/summary-popular.md`, se hacía referencia a `../LOGS/25.md`. En realidad, esto era una alucinación de la IA; ese enlace no existía.
El archivo real está en `LOGS/25.md`, y la referencia usando una ruta relativa debería ser: `../../../LOGS/25.md`.

El resultado fue que MiniMax M2.1 hizo una corrección bastante tonta. Primero escaneó todo el proyecto, encontró que `.czon/src/zh-Hans/LOGS/25.md` existía, y luego cambió la referencia a `../src/zh-Hans/LOGS/25.md`.

Esto cambió el enlace al directorio de salida de compilación, lo cual obviamente es incorrecto.

Entonces, añadí una nueva regla a la verificación de enlaces: prohibir referencias a archivos dentro de `.czon/src`.

Como resultado, la IA comenzó a buscar archivos en `.czon/dist`, que es aún más la salida de la salida (archivos de recursos estáticos HTML). Después de que interrumpí el proceso, la IA claramente se volvió loca. Comenzó a crear enlaces simbólicos e incluso a copiar mis archivos originales por todas partes, con el fin de pasar la verificación de enlaces. Pero en realidad, el entorno empeoraba cada vez más; los nuevos archivos creaban más errores de enlaces. Tuve que interrumpir todo y restaurar todo el entorno. Lo siento, IA, no debería haberte llamado idiota, solo estaba enojado por un momento.

Bueno, el verdadero problema radica en:

1.  El Agente de IA no escanea por defecto todos los archivos del proyecto. Esto se puede atribuir al escenario de diseño de OpenCode, que a menudo necesita manejar proyectos muy grandes, por lo que no es factible escanear todos los archivos por defecto.
2.  La IA en sí misma tiene una comprensión insuficiente de las **rutas relativas**. Esto lo vi en su cadena de pensamiento (Thinking); estaba intentando ejecutar algunos scripts, experimentando para tratar de comprender el concepto de ruta relativa. (Por cierto, yo tampoco puedo entender intuitivamente el resultado después de muchos `../..`).

La solución es:

Necesito proporcionarle una lista de soluciones candidatas para corregir los enlaces, y dárselas en forma de rutas relativas basadas en el archivo con el problema. De esta manera, la IA no necesita escanear todo el proyecto ni entender por sí misma las rutas relativas.

```
npx czon@latest check
```

La función de verificación de enlaces ya está disponible en la versión CZON 0.9.1, y logró que MiniMax M2.1 corrigiera 500 errores de enlaces. La eficiencia es bastante aceptable.

Este incidente me hizo darme cuenta de que la verificación de compilación y la corrección por IA deben complementarse. La verificación de compilación necesita ser amigable para la IA. Pero el requisito previo para ser amigable con la IA es conocer sus limitaciones y luego diseñar un formato de salida de verificación que se adapte a ella.
---
"title": "AI Agent モジュールレベルにおけるソフトウェア工学アーキテクチャ設計の考察"
"summary": "本記事は、2026年1月12日時点での筆者の、AI Agentをモジュールレベルのソフトウェア工学に適用する際の考察を記録したものです。筆者は、人と機械が協調するアーキテクチャを提案し、その要点として、git worktreeを用いたコードリポジトリの管理、CLIによるAI Agent（Claude Codeなど）の呼び出しとセッション管理、透明性を実現するためのAgentからの終了通知および対話履歴の取得を挙げています。筆者は、各タスクを独立したAgentセッションに割り当て、スケジューラによってワークフローを調整する自動化スクリプトの実装を計画しています。記事では、LLM APIを直接呼び出すのではなくAgentを利用する利点、すなわちAgentが（コードリポジトリの探索、システムコマンドの呼び出し、コンテキスト管理などの）低レベルの複雑さを処理し、車輪の再発明を回避できる点を強調しています。筆者はまず、この考え方を検証するための簡易版の実装を目指しています。"
"tags":
  - "AI Agent"
  - "ソフトウェア工学"
  - "人機協調"
  - "Claude Code"
  - "自動化"
  - "モジュール化"
  - "透明性"
  - "スケジューラ"
"date": "2026-01-12"
---

今日は2026年1月12日、月曜日の朝です。

今朝早く起きて、昨日C1と議論したAI Agentの設計問題を振り返り、いくつかの示唆を得たので、記録しておく必要があると感じました。

[前回の記事](czon://f14dd5dd9a733022055d249db9b1ed3d60d9b60b7eb8c063fe24c02774b6b631)を参考に、私はモジュールレベルでの人機協調ソフトウェア工学アーキテクチャを設計しました。

私はその実現方法を検討しています。

簡単に言えば、重要なポイントは以下の通りです：

1.  `git worktree` コマンドを使用してコードリポジトリを管理し、各リポジトリにセットアップスクリプトを用意する必要があります。
2.  CLIを通じてAI Agent (Claude Code, OpenCode, ...など) を呼び出し、プロンプトを渡してセッションを開始する必要があります。
3.  AI Agentからの終了通知を受け取れる必要があります。
4.  AI Agentの中間的な対話履歴を取得できる必要があります。そうでなければ透明性を達成できません。[このドキュメント](czon://3a40b7b252512466f0b0feb8c7ea77fc624bb0026cbae8882c5c205462e0aa64)で言及されている「制御可能な信頼性」の問題を参照すると、プロセス中の透明性と制御性が必要です。

これらの機能に基づいて、モジュールレベルのソフトウェア工学タスクを完了するための自動化スクリプトを実装することができます。

Claude Codeを例にとると、

1.  Claude Codeは、CLIから直接プロンプトを渡すことで、新しいセッションを開始できます。
2.  Claude Codeは、`-p` パラメータを使用して、結果を標準出力に出力し終わった時点で終了を示すことができます。
3.  Claude CodeはセッションIDを渡す機能を提供しており、それに基づいて `.claude` ディレクトリ内の対応する対話履歴ファイルを見つけ、過去のメッセージを取得できます。

このようにして、これらの作業を管理するスクリプトを作成することができます。

各セッションは独立しており、クリーンな状態です。各セッションは、タスクを完了するために1つのAgentに割り当てられます。

Agentインスタンスは、その基盤がClaude Codeであろうと他のものであろうと関係なく、インターフェースとして抽象化できます。

そしてスケジューラは、事前に定義されたワークフローに基づいて、異なるAgentをスケジュールしてタスクを完了させます。

なぜLLM APIではなくAgentを基盤とするのでしょうか？それは、Agentがコードリポジトリの探索、オペレーティングシステムコマンドの呼び出し、コンテキスト管理、LLM APIへの適応といった低レベルのロジックを処理してくれるからです。これは複雑なシステムであり、要求を満たさない場合を除き、車輪の再発明は必要ないと考えています。

私はまず、この考え方が実現可能かどうかを検証するための最も簡素化されたバージョンを実装する予定です。今後の進捗記録にご期待ください。